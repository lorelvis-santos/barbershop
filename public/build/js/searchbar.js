let searchTimeout,currentElement=null;const searchBarContainer=document.querySelector(".search-bar"),resultsContainer=document.querySelector(".search-results-container"),searchInput=document.querySelector(".search-bar input");function searchbar(e,t){searchInput.addEventListener("input",(r=>{debounceSearch(e,t)})),searchInput.addEventListener("focusin",(r=>{!searchInput.value.trim()<2&&debounceSearch(e,t)})),searchInput.addEventListener("focusout",(e=>{setTimeout((()=>{searchBarContainer.classList.remove("active"),resultsContainer.classList.remove("show")}),100)}))}function debounceSearch(e,t){clearTimeout(searchTimeout),searchTimeout=setTimeout((()=>{fetchResults(e)}),t)}async function fetchResults(e){const t=searchInput.value.trim();if(t.length<2)return clearContainer(".search-results-container"),searchBarContainer.classList.remove("active"),void resultsContainer.classList.remove("show");try{const r=await fetch(`/api/search/${e}?query=${t}`);displayResults(await r.json())}catch(e){console.error("Error fetching results:",e)}}function displayResults(e){clearContainer(".search-results-container"),0===e.length?(searchBarContainer.classList.remove("active"),resultsContainer.classList.remove("show")):(searchBarContainer.classList.add("active"),resultsContainer.classList.add("show"),e.forEach((e=>{const t=document.createElement("P"),r=document.createElement("LI");t.textContent=e.data,r.appendChild(t),r.onclick=function(){selectElement(e)},resultsContainer.appendChild(r)})))}function selectElement(e){e!=currentElement&&(currentElement=e,document.querySelector("#userId").value=currentElement.id,searchInput.value=currentElement.data),clearContainer(".search-results-container")}document.addEventListener("DOMContentLoaded",(()=>{searchbar("employees",275)}));